<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orsoline Bypass by Valerio Ciarletta</title>
    <style>
        /* ... (stili rimangono invariati) */
    </style>
</head>
<body>
    <div class="container">
        <!-- Pulsante VIP in alto a destra -->
        <button class="vip-btn" id="vipBtn">VIP</button>
        <!-- Modal VIP -->
        <div class="vip-modal" id="vipModal">
            <div class="vip-content">
                <span class="vip-close" id="vipClose">&times;</span>
                <h2 class="vip-title">Diventa VIP</h2>
                <div class="vip-features">
                    <div class="vip-feature">
                        <span class="vip-icon">✓</span>
                        <span>Accesso a 100 account Epic Games premium</span>
                    </div>
                    <div class="vip-feature">
                        <span class="vip-icon">✓</span>
                        <span>Funzione link permanente attivata</span>
                    </div>
                    <div class="vip-feature">
                        <span class="vip-icon">✓</span>
                        <span>Priorità nei server VIP</span>
                    </div>
                    <div class="vip-feature">
                        <span class="vip-icon">✓</span>
                        <span>Supporto premium 24/7</span>
                    </div>
                </div>
                <a href="https://prank9912.github.io/Lupoumberto/Instagram.html" class="vip-signup">Iscriviti VIP gratis con Instagram</a>
            </div>
        </div>
        <header>
            <div class="logo">Orsoline Bypass</div>
            <div class="credit">by <a href="https://instagram.com/ilcharlyesotico" target="_blank">Valerio Ciarletta</a></div>
        </header>
        <div class="card">
            <div class="controls">
                <input type="text" id="url-input" placeholder="Inserisci l'URL da visualizzare...">
                <div class="btn-group">
                    <button id="load-btn" class="btn">Carica</button>
                    <button id="fullscreen-btn" class="btn">Schermo intero</button>
                </div>
            </div>
            <div class="frame-container" id="frame-container">
                <div class="terminal" id="terminal">
                    <div class="terminal-line">Orsoline Bypass - Versione 3.1.4</div>
                    <div class="terminal-line">Preparando la connessione proxy...</div>
                    <div class="terminal-line">Bypass delle restrizioni in corso<span class="terminal-prompt">...</span></div>
                </div>
                <iframe id="page-frame" src="about:blank"></iframe>
            </div>
            <div class="status-bar">
                <div id="status">Pronto</div>
                <div id="proxy-status">Proxy: Inattivo</div>
            </div>
        </div>
    </div>
    <script>
        // Elementi DOM
        const urlInput = document.getElementById('url-input');
        const loadBtn = document.getElementById('load-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const frameContainer = document.getElementById('frame-container');
        const pageFrame = document.getElementById('page-frame');
        const terminal = document.getElementById('terminal');
        const statusElement = document.getElementById('status');
        const proxyStatusElement = document.getElementById('proxy-status');
        const vipBtn = document.getElementById('vipBtn');
        const vipModal = document.getElementById('vipModal');
        const vipClose = document.getElementById('vipClose');
        // NUOVI URL DEL PROXY
        const PROXY_URL = 'https://api.allorigins.win/raw?url='; // Nuovo proxy principale
        const ALT_PROXY_URL = 'https://cors-anywhere.glitch.me/'; // Nuovo proxy alternativo
        // Gestione VIP Modal
        vipBtn.addEventListener('click', () => {
            vipModal.style.display = 'flex';
        });
        vipClose.addEventListener('click', () => {
            vipModal.style.display = 'none';
        });
        window.addEventListener('click', (e) => {
            if (e.target === vipModal) {
                vipModal.style.display = 'none';
            }
        });
        // Animazione terminale
        function animateTerminal() {
            const lines = [
                "> Connessione al proxy...",
                "> Analisi delle restrizioni...",
                "> Bypass X-Frame-Options... [SUCCESSO]",
                "> Bypass CSP... [SUCCESSO]",
                "> Connessione stabilita",
                "> Pronto per il caricamento"
            ];
            let currentLine = 0;
            let terminalContent = terminal.innerHTML;
            const interval = setInterval(() => {
                if (currentLine < lines.length) {
                    terminalContent += `<div class="terminal-line">${lines[currentLine]}</div>`;
                    terminal.innerHTML = terminalContent;
                    currentLine++;
                    terminal.scrollTop = terminal.scrollHeight;
                } else {
                    clearInterval(interval);
                }
            }, 500);
        }
        // Avvia animazione all'avvio
        document.addEventListener('DOMContentLoaded', animateTerminal);
        // Carica la pagina nel frame
        loadBtn.addEventListener('click', loadUrl);
        // Permette di premere Invio oltre al click del pulsante
        urlInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loadUrl();
            }
        });
        // Funzione per caricare l'URL tramite proxy
        async function loadUrl() {
            const url = urlInput.value.trim();
            if (url) {
                // Mostra il terminale
                terminal.style.display = 'flex';
                pageFrame.style.display = 'none';
                // Aggiorna lo stato
                statusElement.textContent = "Connessione in corso...";
                proxyStatusElement.textContent = "Proxy: Connessione";
                // Aggiungi messaggio al terminale
                terminal.innerHTML += `<div class="terminal-line">> Caricamento: ${url}</div>`;
                terminal.scrollTop = terminal.scrollHeight;
                // Verifica che l'URL abbia http:// o https://
                let finalUrl = url;
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    finalUrl = 'https://' + url;
                }
                try {
                    // Usa il proxy
                    const startTime = Date.now();
                    const html = await fetchWithProxy(finalUrl);
                    const loadTime = ((Date.now() - startTime) / 1000).toFixed(2);
                    // Crea un blob con il contenuto HTML
                    const blob = new Blob([html], { type: 'text/html' });
                    const blobUrl = URL.createObjectURL(blob);
                    // Messaggio di successo
                    terminal.innerHTML += `<div class="terminal-line">> Caricamento completato in ${loadTime}s</div>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    // Nascondi il terminale dopo un breve ritardo
                    setTimeout(() => {
                        terminal.style.display = 'none';
                        pageFrame.style.display = 'block';
                        pageFrame.src = blobUrl;
                        // Aggiorna lo stato
                        statusElement.textContent = `Connesso (${loadTime}s)`;
                        proxyStatusElement.textContent = "Proxy: Attivo";
                    }, 800);
                } catch (error) {
                    console.error('Errore:', error);
                    terminal.innerHTML += `<div class="terminal-line">> ERRORE: ${error.message}</div>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    // Aggiorna lo stato
                    statusElement.textContent = "Errore di connessione";
                    proxyStatusElement.textContent = "Proxy: Errore";
                }
            } else {
                terminal.innerHTML += `<div class="terminal-line">> ERRORE: Nessun URL fornito</div>`;
                terminal.scrollTop = terminal.scrollHeight;
            }
        }
        // Funzione per fetch tramite proxy
        async function fetchWithProxy(url) {
            try {
                // Prima prova con il proxy principale
                terminal.innerHTML += `<div class="terminal-line">> Connessione al proxy primario...</div>`;
                terminal.scrollTop = terminal.scrollHeight;
                const proxyUrl = PROXY_URL + encodeURIComponent(url);
                const response = await fetch(proxyUrl, {
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                });
                if (!response.ok) {
                    throw new Error(`Errore HTTP: ${response.status}`);
                }
                return await response.text();
            } catch (error) {
                // Se il primo proxy fallisce, prova con un alternativo
                terminal.innerHTML += `<div class="terminal-line">> Proxy primario non disponibile, tentativo con backup...</div>`;
                terminal.scrollTop = terminal.scrollHeight;
                const altProxyUrl = ALT_PROXY_URL + encodeURIComponent(url);
                const response = await fetch(altProxyUrl);
                if (!response.ok) {
                    throw new Error(`Errore proxy alternativo: ${response.status}`);
                }
                return await response.text();
            }
        }
        // Gestione del tutto schermo
        fullscreenBtn.addEventListener('click', toggleFullscreen);
        function toggleFullscreen() {
            if (frameContainer.classList.contains('fullscreen')) {
                // Esci dal tutto schermo
                frameContainer.classList.remove('fullscreen');
                fullscreenBtn.textContent = 'Schermo intero';
                document.body.style.overflow = 'auto';
            } else {
                // Entra in tutto schermo
                frameContainer.classList.add('fullscreen');
                fullscreenBtn.textContent = 'Esci da schermo intero';
                document.body.style.overflow = 'hidden';
            }
        }
        // Chiudi il tutto schermo con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && frameContainer.classList.contains('fullscreen')) {
                toggleFullscreen();
            }
        });
    </script>
</body>
</html>
