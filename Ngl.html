<!DOCTYPE html>
<html lang="it">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>NGL Tool</title>  
    <style>  
        :root {  
            --ngl-pink: #ff4e79;  
            --ngl-dark: #0e0e10;  
            --ngl-gray: #1a1a1c;  
            --ngl-light-text: #efeff1;  
        }  
        
        body {  
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;  
            background-color: var(--ngl-dark);  
            color: var(--ngl-light-text);  
            margin: 0;  
            padding: 0;  
            line-height: 1.5;  
        }  

        .container {  
            max-width: 500px;  
            margin: 40px auto;  
            padding: 20px;  
            background-color: var(--ngl-gray);  
            border-radius: 16px;  
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);  
        }  

        .header {  
            text-align: center;  
            margin-bottom: 30px;  
        }  

        .logo {  
            color: var(--ngl-pink);  
            font-size: 32px;  
            font-weight: 800;  
            margin-bottom: 10px;  
        }  

        .subtitle {  
            color: #adadb8;  
            font-size: 16px;  
            margin-bottom: 30px;  
        }  

        .form-group {  
            margin-bottom: 20px;  
        }  

        label {  
            display: block;  
            margin-bottom: 8px;  
            font-size: 14px;  
            font-weight: 500;  
            color: #adadb8;  
        }  

        input, textarea, select {  
            width: 100%;  
            padding: 12px 16px;  
            background-color: #252529;  
            border: 1px solid #333;  
            border-radius: 8px;  
            color: white;  
            font-size: 16px;  
            box-sizing: border-box;  
        }  

        textarea {  
            min-height: 100px;  
            resize: vertical;  
        }  

        input:focus, textarea:focus, select:focus {  
            outline: none;  
            border-color: var(--ngl-pink);  
        }  

        button {  
            width: 100%;  
            padding: 14px;  
            background-color: var(--ngl-pink);  
            color: white;  
            border: none;  
            border-radius: 8px;  
            font-size: 16px;  
            font-weight: 600;  
            cursor: pointer;  
            transition: all 0.2s;  
            margin-top: 10px;
        }  

        button:hover {  
            background-color: #ff2d62;  
            transform: translateY(-1px);  
        }  

        button:active {  
            transform: translateY(0);  
        }  

        #results {  
            margin-top: 25px;  
            font-size: 14px;  
        }  

        .success {  
            color: #4caf50;  
        }  

        .error {  
            color: #f44336;  
        }  

        .warning {  
            color: #ff9800;  
            background-color: rgba(255, 152, 0, 0.1);  
            padding: 12px;  
            border-radius: 8px;  
            margin-bottom: 20px;  
            font-size: 14px;  
        }  

        .divider {  
            height: 1px;  
            background-color: #333;  
            margin: 25px 0;  
        }  

        @media (max-width: 600px) {  
            .container {  
                margin: 20px 15px;  
                padding: 20px 15px;  
            }  
        }  
    </style>
</head>  
<body>  
    <div class="container">  
        <div class="header">  
            <div class="logo">NGL</div>  
            <div class="subtitle">Invia messaggi anonimi</div>  
        </div>  
        
        <div class="warning">  
            ⚠️ <b>Nota:</b> Questo è uno strumento non ufficiale. Per risultati garantiti, usa la versione Python.  
        </div>  

        <div class="form-group">  
            <label for="nglUrl">Link del profilo NGL</label>  
            <input type="text" id="nglUrl" placeholder="https://ngl.link/username" required>  
        </div>  

        <div class="form-group">  
            <label for="message">Il tuo messaggio</label>  
            <textarea id="message" placeholder="Scrivi qualcosa di interessante..." required></textarea>  
        </div>  

        <div class="form-group">  
            <label for="requests">Numero di invii</label>  
            <input type="number" id="requests" min="1" value="1" required>  
        </div>  
        
        <div class="form-group">
            <label for="delay">Secondi tra ogni richiesta</label>
            <input type="number" id="delay" min="0" value="1" required>
        </div>
        
        <div class="form-group">
            <label for="method">Metodo di invio</label>
            <select id="method">
                <option value="direct">Diretto (NGL API)</option>
                <option value="telegram">Telegram Bot</option>
                <option value="webhook">Webhook Alternativo</option>
            </select>
        </div>

        <button id="sendBtn">Invia Anonimamente</button>  

        <div class="divider"></div>  

        <div id="results"></div>  
    </div>  

    <script>  
        document.getElementById('sendBtn').addEventListener('click', async function() {  
            const nglUrl = document.getElementById('nglUrl').value.trim();  
            const message = document.getElementById('message').value.trim();  
            const numRequests = parseInt(document.getElementById('requests').value);  
            const delay = parseInt(document.getElementById('delay').value);
            const method = document.getElementById('method').value;
            const resultsDiv = document.getElementById('results');  
              
            resultsDiv.innerHTML = '';  
              
            if (!nglUrl || !message || isNaN(numRequests) || numRequests < 1 || isNaN(delay) || delay < 0) {  
                alert('Per favore compila tutti i campi correttamente!');  
                return;  
            }  
              
            const usernameMatch = nglUrl.match(/ngl\.link\/([^\/]+)/);  
            if (!usernameMatch) {  
                alert('URL NGL non valido! Deve essere nel formato: https://ngl.link/username');  
                return;  
            }  
            const username = usernameMatch[1];  
              
            this.disabled = true;  
            this.textContent = 'Invio in corso...';  
              
            let successCount = 0;  
            
            const sendMessage = async (attempt) => {
                try {
                    let response;
                    
                    if (method === 'telegram') {
                        // Invia via Telegram Bot
                        const botToken = '7758818971:AAFilzH7FyUGpUeOXF5hSVSLhLnRwN2wJnE';
                        const chatId = '5709299213';
                        const telegramUrl = `https://api.telegram.org/bot${botToken}/sendMessage`;
                        
                        response = await fetch(telegramUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                chat_id: chatId,
                                text: `NGL Request\nUsername: ${username}\nMessage: ${message}\nAttempt: ${attempt+1}/${numRequests}`
                            })
                        });
                    } 
                    else if (method === 'webhook') {
                        // Metodo alternativo con webhook
                        response = await fetch('https://attractive-market-48.webhook.cool', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                username: username,
                                message: message,
                                attempt: attempt+1,
                                total: numRequests
                            })
                        });
                    }
                    else {
                        // Metodo diretto originale
                        response = await fetch('https://ngl.link/api/submit', {  
                            method: 'POST',  
                            headers: {  
                                'Content-Type': 'application/x-www-form-urlencoded',  
                                'User-Agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Mobile Safari/537.36',  
                                'origin': 'https://ngl.link',  
                                'referer': `https://ngl.link/${username}`,  
                            },  
                            body: new URLSearchParams({  
                                username: username,  
                                question: message,  
                                deviceId: 'cf1b6e1b-668d-4f98-a715-d5fb33601c5c',  
                                gameSlug: '',  
                                referrer: ''  
                            }),  
                            mode: 'no-cors'  
                        });
                    }
                      
                    const result = document.createElement('div');  
                      
                    if (response.ok || response.type === 'opaque') {  
                        result.className = 'success';  
                        result.textContent = `✔️ Messaggio ${attempt+1} inviato a ${username} (Metodo: ${method})`;  
                        successCount++;  
                    } else {  
                        result.className = 'error';  
                        const errorData = await response.json().catch(() => ({}));
                        result.textContent = `✖️ Errore nell'invio (${response.status} - ${errorData.description || 'nessun dettaglio'})`;  
                    }  
                      
                    resultsDiv.appendChild(result);  
                    return true;
                } catch (error) {  
                    const result = document.createElement('div');  
                    result.className = 'error';  
                    result.textContent = `✖️ Errore grave: ${error.message}`;  
                    resultsDiv.appendChild(result);  
                    return false;
                }
            };
              
            for (let i = 0; i < numRequests; i++) {  
                const success = await sendMessage(i);
                
                if (i < numRequests - 1 && delay > 0) {
                    // Mostra il countdown solo se c'è un delay e non è l'ultimo messaggio
                    const countdown = document.createElement('div');
                    countdown.textContent = `⏳ Attesa di ${delay} secondi prima del prossimo invio...`;
                    resultsDiv.appendChild(countdown);
                    
                    await new Promise(resolve => {
                        let remaining = delay;
                        const interval = setInterval(() => {
                            remaining--;
                            countdown.textContent = `⏳ Attesa di ${remaining} secondi prima del prossimo invio...`;
                            if (remaining <= 0) {
                                clearInterval(interval);
                                resultsDiv.removeChild(countdown);
                                resolve();
                            }
                        }, 1000);
                    });
                }
            }  
              
            const summary = document.createElement('div');  
            summary.style.marginTop = '10px';  
            summary.style.fontWeight = 'bold';  
            summary.textContent = `Completato! ${successCount}/${numRequests} tentativi riusciti (Metodo: ${method}).`;  
            resultsDiv.appendChild(summary);  
              
            this.disabled = false;  
            this.textContent = 'Invia Anonimamente';  
        });  
    </script>
</body>  
</html>
